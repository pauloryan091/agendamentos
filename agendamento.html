<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agendamentos - Sistema de Agendamento</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Tabela */
    .table-actions button {
      margin-right: 5px;
    }
    .form-inline {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 1.5rem;
    }
    .form-inline select, .form-inline input, .form-inline button {
      padding: 8px;
    }
  </style>
</head>
<body>

<header>
  <div class="container header-content">
    <a href="#" class="logo">Agendamento+</a>
    <button id="menuBtn" aria-label="Abrir menu">☰</button>
    <nav id="menu" class="nav-links">
      <a href="dashboard.html" class="nav-link">Dashboard</a>
      <a href="serviços.html" class="nav-link">Serviços</a>
      <a href="agendamento.html" class="nav-link">Agendamentos</a>
      <a href="clientes.html" class="nav-link">Clientes</a>
      <a href="perfil.html" class="nav-link">Perfil</a>
    </nav>
  </div>
</header>


<main class="main-content container">

    <section class="section">
        <h2 class="section-title">Agendamentos</h2>

        <form action="salvar_agendamento.php" method="POST"
class="form-agendamento">
            <input type="text" name="cliente" placeholder="Nome do cliente" required>
            <input type="text" name="servico" placeholder="Serviço" required>
            <input type="number" name="valor" placeholder="Valor" required>
            <input type="date" name="data" required>
            <input type="time" name="hora" required>
            <button type="submit" class="btn btn-success">Agendar</button>
        </form>

        <hr>

        <div class="form-inline">
            <input type="date" id="filtroData" class="form-control">
            <button class="btn btn-primary" onclick="filtrarAgendamentos()">Filtrar</button>
            <button class="btn btn-secondary" onclick="limparFiltro()">Limpar Filtro</button>
            <select id="selectAgendamento">
                </select>
            <button class="btn btn-info" onclick="editarSelecionado()">Editar</button>
            <button class="btn btn-danger" onclick="cancelarSelecionado()">Cancelar</button>
        </div>

        <table class="table table-striped" id="tabelaAgendamentos">
            <thead>
                <tr>
                    <th>Cliente</th>
                    <th>Serviço</th>
                    <th>Valor</th>
                    <th>Data</th>
                    <th>Hora</th>
                </tr>
            </thead>
            <tbody id="corpoTabela">
                </tbody>
        </table>
    </section>
</main>

<footer class="footer section">
  <div class="container footer-content">
    <div class="footer-brand">
      <a href="#" class="logo">Agendamento+</a>
      <p>Sistema de Agendamento Online</p>
    </div>
    <nav class="footer-nav">
      <a href="dashboard.html" class="nav-link">Dashboard</a>
      <a href="serviços.html" class="nav-link">Serviços</a>
      <a href="agendamento.html" class="nav-link">Agendamentos</a>
      <a href="clientes.html" class="nav-link">Clientes</a>
      <a href="perfil.html" class="nav-link">Perfil</a>
    </nav>
    <div class="footer-social">
      <a href="https://www.instagram.com/pauloryantomaz/" target="_blank" class="footer-link">Instagram</a>
      <a href="https://wa.me/5561985825956" target="_blank" class="footer-link">WhatsApp</a>
    </div>
  </div>
  <div class="footer-copy">
    <p>&copy; 2025 Agendamento+. Todos os direitos reservados.</p>
  </div>
</footer>

<script>
// Lista simulada
let agendamentos = [
  {cliente: "Paulo Ryan", servico: "Corte de Cabelo", valor: 50, data: "2025-08-14", hora: "09:00"},
  {cliente: "Carlos Silva", servico: "Massagem", valor: 80, data: "2025-08-15", hora: "14:00"},
  {cliente: "Ana Souza", servico: "Depilação", valor: 60, data: "2025-08-16", hora: "10:30"},
];

// Elementos
const corpoTabela = document.getElementById("corpoTabela");
const selectAgendamento = document.getElementById("selectAgendamento");

// Exibir agendamentos
function mostrarAgendamentos(lista) {
  corpoTabela.innerHTML = "";
  selectAgendamento.innerHTML = "";
  
  if(lista.length === 0){
    corpoTabela.innerHTML = `<tr><td colspan="5" style="text-align:center;">Nenhum agendamento encontrado.</td></tr>`;
    return;
  }
  lista.forEach((a, index) => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${a.cliente}</td>
      <td>${a.servico}</td>
      <td>R$ ${a.valor.toFixed(2)}</td>
      <td>${a.data.split("-").reverse().join("/")}</td>
      <td>${a.hora}</td>
    `;
    corpoTabela.appendChild(row);

    // Adiciona no seletor
    let opt = document.createElement("option");
    opt.value = index;
    opt.textContent = `${a.cliente} - ${a.data} ${a.hora}`;
    selectAgendamento.appendChild(opt);
  });
}

// Filtro
function filtrarAgendamentos() {
  const dataFiltro = document.getElementById("filtroData").value;
  if(dataFiltro) {
    const filtrados = agendamentos.filter(a => a.data === dataFiltro);
    mostrarAgendamentos(filtrados);
  }
}

function limparFiltro() {
  document.getElementById("filtroData").value = "";
  mostrarAgendamentos(agendamentos);
}

// Editar / Cancelar do seletor
function editarSelecionado() {
  const idx = selectAgendamento.value;
  if(idx === "") return alert("Selecione um agendamento.");
  const a = agendamentos[idx];
  alert(`Simulação: Editar agendamento de ${a.cliente} em ${a.data} às ${a.hora}`);
}

function cancelarSelecionado() {
  const idx = selectAgendamento.value;
  if(idx === "") return alert("Selecione um agendamento.");
  const a = agendamentos[idx];
  if(confirm(`Deseja realmente cancelar o agendamento de ${a.cliente} em ${a.data} às ${a.hora}?`)) {
    agendamentos.splice(idx, 1);
    mostrarAgendamentos(agendamentos);
  }
}

// Inicializa
mostrarAgendamentos(agendamentos);

// Menu responsivo
const btn = document.getElementById('menuBtn');
const menu = document.querySelector('.nav-links');
btn && btn.addEventListener('click', () => menu.classList.toggle('show'));
</script>

</body>
</html>
